!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function n(e,t,i){function o(c,s){if(!t[c]){if(!e[c]){var u="function"==typeof require&&require;if(!s&&u)return u(c,!0);if(r)return r(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var f=t[c]={t:{}};e[c][0].call(f.t,function(n){var t=e[c][1][n];return o(t||n)},f,f.t,n,e,t,i)}return t[c].t}for(var r="function"==typeof require&&require,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(n,e,t){"use strict";t.s=!0;var i=c(n("./ChainWebSocket")),o=c(n("./GrapheneApi")),r=c(n("./ChainConfig"));function c(n){return n&&n.s?n:{default:n}}var s=void 0,u=!0;t.default={u:function(n){this.h=n,s&&s.u(n)},l:function(n){u=n},reset:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",e=this,t=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;return this.close().then(function(){return(s=new a).u(e.h),s&&t&&s.connect(n,i),s})},v:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",e=arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,i=arguments[3];return s||(s=new a).u(this.h),s&&e&&s.connect(n,t,i),s},p:function(){return Apis.v().m},close:function(){return s?new Promise(function(n){s.close().then(function(){s=null,n()})}):Promise.resolve()}};var a=function(){function n(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}return n.prototype.connect=function(n,e){var t=this,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.url=n;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&n.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this._=new i.default(n,this.h,e,u,function(){t.T&&t.T.exec("get_objects",[["2.1.0"]]).catch(function(n){})}),this.k=this._.S("","").then(function(){console.log("Connected to API node:",n),t.T=new o.default(t._,"database"),t.g=new o.default(t._,"network_broadcast"),t.W=new o.default(t._,"history"),c&&(t.C=new o.default(t._,"crypto"));var e=t.T.init().then(function(){return t.T.exec("get_chain_id",[]).then(function(n){return t.m=n,r.default.R(n)})});t._.P=function(){t._.S("","").then(function(){t.T.init().then(function(){t.h&&t.h("reconnect")}),t.g.init(),t.W.init(),c&&t.C.init()})};var i=[e,t.g.init(),t.W.init()];return c&&i.push(t.C.init()),Promise.all(i)})},n.prototype.close=function(){var n=this;return this._?this._.close().then(function(){n._=null}):(this._=null,Promise.resolve())},n.prototype.I=function(){return this.T},n.prototype.O=function(){return this.g},n.prototype.A=function(){return this.W},n.prototype.G=function(){return this.C},n.prototype.u=function(n){this.h=n},n}();e.t=t.default},{N:2,U:3,q:4}],2:[function(n,e,t){(function(n){"use strict";t.s=!0;var i=void 0,o={D:n.M.H||"GPH"};i={j:"CORE",D:"GPH",B:15,F:86400,J:86400,L:{V:{j:"BTS",D:"BTS",m:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},K:{j:"TT",D:"TT",m:"c848eb7e7fab7bc524b42b865b5739f397297f142daa077661afa4ae04215130"},X:{j:"TTEST",D:"TTEST",m:"3a6e30213e0244d869810c5b213f10bd4f0b27b0aded88d22e444f7529eebfc4"},Y:{j:"MUSE",D:"MUSE",m:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},Z:{j:"TEST",D:"TEST",m:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},$:{j:"GOV",D:"FEW",m:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"}},R:function(n){var e,t,r=void 0,c=void 0,s=void 0;for(r=0,e=(t=Object.keys(i.L)).length;r<e;r++)if(s=t[r],(c=i.L[s]).m===n)return i.nn=s,c.D&&(i.D=c.D,o.D=c.D),{nn:s,en:c};i.nn||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){i.j="CORE",i.D="GPH",o.D="GPH",i.B=15,i.F=86400,console.log("Chain config reset")},tn:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GPH";i.D=n,o.D=n}},t.default=i,e.t=t.default}).call(this,n("_process"))},{in:7}],3:[function(n,e,t){(function(i){"use strict";t.s=!0;var o=void 0;o="undefined"!=typeof WebSocket||i.M.on?"undefined"!=typeof WebSocket&&"undefined"!=typeof document?n("ReconnectingWebSocket"):WebSocket:n("ws");var r=5,c=2*r,s=function(){function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,s=this,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.h=t,this.rn=setTimeout(function(){s.cn&&s.cn(new Error("Connection attempt timed out: "+e))},i);var f=u||"undefined"==typeof WebSocket||"undefined"==typeof document?o:WebSocket;try{this.sn=new f(e)}catch(n){console.error("invalid websocket URL:",n,e),this.sn=new f("wss://127.0.0.1:8090")}this.sn.un=5e3,this.cn=null,this.P=null,this.an=r,this.fn=c,this.hn=a,this.dn=new Promise(function(n,e){s.cn=e,s.sn.onopen=function(){clearTimeout(s.rn),s.h&&s.h("open"),s.P&&s.P(),s.ln=setInterval(function(){if(s.fn--,0==s.fn)return console.error("keep alive timeout."),s.sn.terminate?s.sn.terminate():s.sn.close(),clearInterval(s.ln),void(s.ln=void 0);s.an--,0==s.an&&(s.hn&&s.hn(),s.an=r)},5e3),n()},s.sn.onerror=function(n){s.ln&&(clearInterval(s.ln),s.ln=void 0),clearTimeout(s.rn),s.h&&s.h("error"),s.cn&&s.cn(n)},s.sn.onmessage=function(n){s.fn=c,s.listener(JSON.parse(n.data))},s.sn.onclose=function(){s.ln&&(clearInterval(s.ln),s.ln=void 0);for(var n=new Error("connection closed"),e=s.bn+1;e<=s.vn;e+=1)s.wn[e].reject(n);s.h&&s.h("closed"),s.pn&&s.pn()}}),this.vn=0,this.bn=0,this.wn={},this.mn={},this._n={}}return n.prototype.call=function(n){var e=this;if(1!==this.sn.readyState)return Promise.reject(new Error("websocket state error:"+this.sn.readyState));var t=n[1];if(this.vn+=1,"set_subscribe_callback"!==t&&"subscribe_to_market"!==t&&"broadcast_transaction_with_callback"!==t&&"set_pending_transaction_callback"!==t||(this.mn[this.vn]={Tn:n[2][0]},n[2][0]=this.vn),"unsubscribe_from_market"===t||"unsubscribe_from_accounts"===t){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var o in this.mn)if(this.mn[o].Tn===i){this._n[this.vn]=o;break}}var c={method:"call",kn:n};return c.id=this.vn,this.an=r,new Promise(function(n,t){e.wn[e.vn]={time:new Date,resolve:n,reject:t},e.sn.send(JSON.stringify(c))})},n.prototype.listener=function(n){var e=!1,t=null;"notice"===n.method&&(e=!0,n.id=n.kn[0]),e?t=this.mn[n.id].Tn:(t=this.wn[n.id],this.bn=n.id),t&&!e?(n.error?t.reject(n.error):t.resolve(n.result),delete this.wn[n.id],this._n[n.id]&&(delete this.mn[this._n[n.id]],delete this._n[n.id])):t&&e?t(n.kn[1]):console.log("Warning: unknown websocket response: ",n)},n.prototype.S=function(n,e){var t=this;return this.dn.then(function(){return t.call([1,"login",[n,e]])})},n.prototype.close=function(){var n=this;return new Promise(function(e){n.pn=function(){e(),n.pn=null},n.sn.close(),1!==n.sn.readyState&&e()})},n}();t.default=s,e.t=t.default}).call(this,n("_process"))},{Sn:5,in:7,sn:6}],4:[function(n,e,t){"use strict";t.s=!0;var i=function(){function n(e,t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._=e,this.yn=t}return n.prototype.init=function(){var n=this;return this._.call([1,this.yn,[]]).then(function(e){return n.gn=e,n})},n.prototype.exec=function(n,e){return this._.call([this.gn,n,e]).catch(function(t){throw console.log("!!! GrapheneApi error: ",n,e,t,JSON.stringify(t)),t})},n}();t.default=i,e.t=t.default},{}],5:[function(n,e,t){var i,o;i=this,o=function(){if("undefined"!=typeof window&&"WebSocket"in window)return n.prototype.onopen=function(n){},n.prototype.onclose=function(n){},n.prototype.Wn=function(n){},n.prototype.onmessage=function(n){},n.prototype.onerror=function(n){},n.En=!1,n.CONNECTING=WebSocket.CONNECTING,n.OPEN=WebSocket.OPEN,n.CLOSING=WebSocket.CLOSING,n.CLOSED=WebSocket.CLOSED,n;function n(e,t,i){var o={debug:!1,Cn:!0,Rn:1e3,Pn:3e4,xn:1.5,un:2e3,In:null,binaryType:"blob"};for(var r in i||(i={}),o)void 0!==i[r]?this[r]=i[r]:this[r]=o[r];this.url=e,this.On=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var c,s=this,u=!1,a=!1,f=null,h=document.createElement("div");function d(n,e){var t=document.createEvent("CustomEvent");return t.initCustomEvent(n,!1,!1,e),t}h.addEventListener("open",function(n){s.onopen(n)}),h.addEventListener("close",function(n){s.onclose(n)}),h.addEventListener("connecting",function(n){s.Wn(n)}),h.addEventListener("message",function(n){s.onmessage(n)}),h.addEventListener("error",function(n){s.onerror(n)}),this.addEventListener=h.addEventListener.bind(h),this.removeEventListener=h.removeEventListener.bind(h),this.dispatchEvent=h.dispatchEvent.bind(h),this.open=function(e){if((c=new WebSocket(s.url,t||[])).binaryType=this.binaryType,e){if(this.In&&this.On>this.In)return}else h.dispatchEvent(d("connecting")),this.On=0;(s.debug||n.En)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var i=c,o=setTimeout(function(){(s.debug||n.En)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),a=!0,i.close(),a=!1},s.un);c.onopen=function(t){clearTimeout(o),(s.debug||n.En)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=c.protocol,s.readyState=WebSocket.OPEN,s.On=0;var i=d("open");i.An=e,e=!1,h.dispatchEvent(i)},c.onclose=function(t){if(clearTimeout(o),c=null,u)s.readyState=WebSocket.CLOSED,h.dispatchEvent(d("close"));else{s.readyState=WebSocket.CONNECTING;var i=d("connecting");i.code=t.code,i.reason=t.reason,i.wasClean=t.wasClean,h.dispatchEvent(i),e||a||((s.debug||n.En)&&console.debug("ReconnectingWebSocket","onclose",s.url),h.dispatchEvent(d("close")));var o=s.Rn*Math.pow(s.xn,s.On);f=setTimeout(function(){s.On++,s.open(!0)},o>s.Pn?s.Pn:o)}},c.onmessage=function(e){(s.debug||n.En)&&console.debug("ReconnectingWebSocket","onmessage",s.url,e.data);var t=d("message");t.data=e.data,h.dispatchEvent(t)},c.onerror=function(e){(s.debug||n.En)&&console.debug("ReconnectingWebSocket","onerror",s.url,e),h.dispatchEvent(d("error"))}},1==this.Cn&&this.open(!1),this.send=function(e){if(c)return(s.debug||n.En)&&console.debug("ReconnectingWebSocket","send",s.url,e),c.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(n,e){void 0===n&&(n=1e3),u=!0,c&&c.close(n,e),f&&(clearTimeout(f),f=null)},this.refresh=function(){c&&c.close()}}},void 0!==e&&e.t?e.t=o():i.Sn=o()},{}],6:[function(n,e,t){},{}],7:[function(n,e,t){var i,o,r=e.t={};function c(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(n){if(i===setTimeout)return setTimeout(n,0);if((i===c||!i)&&setTimeout)return i=setTimeout,setTimeout(n,0);try{return i(n,0)}catch(e){try{return i.call(null,n,0)}catch(e){return i.call(this,n,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:c}catch(n){i=c}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(n){o=s}}();var a,f=[],h=!1,d=-1;function l(){h&&a&&(h=!1,a.length?f=a.concat(f):d=-1,f.length&&b())}function b(){if(!h){var n=u(l);h=!0;for(var e=f.length;e;){for(a=f,f=[];++d<e;)a&&a[d].Gn();d=-1,e=f.length}a=null,h=!1,function(n){if(o===clearTimeout)return clearTimeout(n);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(n);try{o(n)}catch(e){try{return o.call(null,n)}catch(e){return o.call(this,n)}}}(n)}}function v(n,e){this.Nn=n,this.Un=e}function w(){}r.qn=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];f.push(new v(n,e)),1!==f.length||h||u(b)},v.prototype.Gn=function(){this.Nn.apply(null,this.Un)},r.title="browser",r.on=!0,r.M={},r.Dn=[],r.version="",r.Hn={},r.Mn=w,r.addListener=w,r.jn=w,r.Bn=w,r.removeListener=w,r.Fn=w,r.Jn=w,r.Ln=w,r.Vn=w,r.zn=function(n){return[]},r.Kn=function(n){throw new Error("process.binding is not supported")},r.Qn=function(){return"/"},r.Xn=function(n){throw new Error("process.chdir is not supported")},r.Yn=function(){return 0}},{}]},{},[1])(1)});